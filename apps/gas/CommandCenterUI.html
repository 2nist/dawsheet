<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DAWSheet — Command Center</title>
  <base target="_top">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --cream:#f7f3e9;
      --cream-2:#f2ecdf;
      --ink:#1f2330;
      --muted:#7a7f8c;
      --accent:#2a74ff;
      --accent-2:#d0dcff;
      --border:#e3dccb;
      --btn-bg:#fbf8f1;
    }
    body { font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
           font-size: 11px; margin: 6px; background: var(--cream); color: var(--ink); }
    .tabs { display:flex; background: var(--ink); color: var(--cream); border-radius:10px; overflow:hidden; }
    .tab { flex:1; text-align:center; padding:4px; cursor:pointer; -webkit-user-select:none; user-select:none; }
    .tab.active { background: #131722; font-weight:600; }
    .wrap { margin-block-start:8px; }
    .content { display:none; background: var(--cream-2); padding:8px; border:1px solid var(--border); border-radius:10px; }
    .section { margin-block-end:8px; }
    .section h4 { margin:2px 0; font-size: 10px; text-transform:uppercase; letter-spacing:.4px; color: var(--muted); }
    .feature { margin:3px 0; }
    .feature button { inline-size:100%; padding:4px 6px; border:1px solid var(--border); border-radius:8px;
                      background: var(--btn-bg); cursor:pointer; }
    .feature button:hover { background:#fff; }
    .feature .primary { background: var(--accent); color:white; border-color: var(--accent); }
    .feature.disabled { opacity:.45; pointer-events:none; }
    .hint { color: var(--muted); font-size:10px; margin-block-start:4px; }
    .row { display:flex; gap:6px; }
    .flex1 { flex: 1; }
  </style>
  <script>
    function switchTab(name){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('.content').forEach(c=>c.style.display='none');
      document.getElementById(name+'-tab').classList.add('active');
      document.getElementById(name+'-content').style.display='block';
    }
    window.onload = () => switchTab('import');
  </script>
  </head>
<body>
  <div class="tabs">
    <div class="tab" id="import-tab"     onclick="switchTab('import')">Import</div>
    <div class="tab" id="library-tab"    onclick="switchTab('library')">Library</div>
    <div class="tab" id="edit-tab"       onclick="switchTab('edit')">Edit</div>
    <div class="tab" id="triggers-tab"   onclick="switchTab('triggers')">Triggers</div>
    <div class="tab" id="routing-tab"    onclick="switchTab('routing')">Routing</div>
    <div class="tab" id="timeline-tab"   onclick="switchTab('timeline')">Timeline</div>
    <div class="tab" id="theory-tab"     onclick="switchTab('theory')">Theory</div>
    <div class="tab" id="theme-tab"      onclick="switchTab('theme')">Theme</div>
    <div class="tab" id="diagnostics-tab"onclick="switchTab('diagnostics')">Diagnostics</div>
  </div>

  <div class="wrap">

    <!-- IMPORT -->
    <div class="content" id="import-content">
      <div class="section">
        <h4>Currently Developing</h4>
        <div class="feature"><button class="primary" onclick="google.script.run.importChordJsonDialog()">Import Song (JSON)</button></div>
        <div class="feature disabled"><button>Import Song (MIDI)</button></div>
        <div class="feature"><button onclick="google.script.run.importChordJsonUrlPrompt()">Import from URL (JSON)</button></div>
        <div class="hint">Use dataset JSON now; MIDI parser coming back as browser IIFE.</div>
      </div>
      <div class="section">
        <h4>Future Needs</h4>
        <div class="feature disabled"><button>Import MusicXML / JAMS / XLAB / PDF</button></div>
        <div class="feature disabled"><button>Lyric Import</button></div>
      </div>
    </div>

    <!-- LIBRARY -->
    <div class="content" id="library-content">
      <div class="section">
        <h4>Core & Integrated</h4>
        <div class="feature"><button onclick="google.script.run.showSongLibrarySidebar()">Open Song Library</button></div>
        <div class="feature"><button onclick="google.script.run.sendSelectedSongToTimeline()">Send Song to Timeline</button></div>
      </div>
      <div class="section">
        <h4>Wish List</h4>
        <div class="feature disabled"><button>Search / Filter (Key, BPM, Tags)</button></div>
        <div class="feature disabled"><button>Export ChordPro / MIDI / JSON</button></div>
      </div>
    </div>

    <!-- EDIT (new: Triggers UI + Library editors) -->
    <div class="content" id="edit-content">
      <div class="section">
        <h4>Edit Triggers UI</h4>
        <div class="feature"><button onclick="google.script.run.openEditTriggersUi()">Open Trigger Mapper</button></div>
        <div class="feature disabled"><button>Insert Step Sequencer Grid</button></div>
        <div class="feature disabled"><button>Insert LFO / Macro Pad</button></div>
      </div>
      <div class="section">
        <h4>Edit Library</h4>
        <div class="row">
          <div class="feature flex1"><button onclick="google.script.run.openSongEditor()">Song Meta</button></div>
          <div class="feature flex1"><button onclick="google.script.run.openArrangementEditor()">Arrangement</button></div>
        </div>
        <div class="row">
          <div class="feature flex1"><button onclick="google.script.run.openPatternEditor()">Pattern / Progression</button></div>
          <div class="feature flex1"><button onclick="google.script.run.openAutomationEditor()">Automation</button></div>
        </div>
      </div>
    </div>

    <!-- TRIGGERS -->
    <div class="content" id="triggers-content">
      <div class="section">
        <h4>Currently Developing</h4>
        <div class="feature"><button class="primary" onclick="google.script.run.generateTriggersFromSong()">Generate Triggers from Song</button></div>
        <div class="feature"><button onclick="google.script.run.previewFirst8Bars()">Preview First 8 Bars</button></div>
      </div>
      <div class="section">
        <h4>Wish List</h4>
        <div class="feature disabled"><button>Control Skins (Neon / Orchestral / Minimal)</button></div>
        <div class="feature disabled"><button>Randomizer / Idea Generator</button></div>
      </div>
    </div>

    <!-- ROUTING -->
    <div class="content" id="routing-content">
      <div class="section">
        <h4>Future Needs (high priority)</h4>
        <div class="feature"><button onclick="google.script.run.ensureRoutingSheet()">Open Routing Sheet</button></div>
        <div class="row">
          <div class="feature flex1"><button onclick="google.script.run.sendRoutingToBridge()">Send Routing to Bridge</button></div>
          <div class="feature flex1"><button onclick="google.script.run.pingBridge()">Ping Bridge</button></div>
        </div>
        <div class="feature disabled"><button>Per-Song Routing Overrides</button></div>
      </div>
    </div>

    <!-- TIMELINE -->
    <div class="content" id="timeline-content">
      <div class="section">
        <h4>Future Needs</h4>
        <div class="feature"><button onclick="google.script.run.timeline_buildForPrompt()">Build Timeline Preview</button></div>
        <div class="feature disabled"><button>Export Timeline (MIDI / JSON)</button></div>
      </div>
    </div>

    <!-- THEORY (music theory methodology) -->
    <div class="content" id="theory-content">
      <div class="section">
        <h4>Currently Developing</h4>
        <div class="feature"><button onclick="google.script.run.openTheoryHelpers()">Open Theory Helpers</button></div>
      </div>
      <div class="section">
        <h4>Wish List</h4>
        <div class="feature disabled"><button>Diatonic Chords by Key</button></div>
        <div class="feature disabled"><button>Progression Templates (ii–V–I, 12-bar)</button></div>
        <div class="feature disabled"><button>Suggest Substitutions / Modulations</button></div>
      </div>
    </div>

    <!-- THEME -->
    <div class="content" id="theme-content">
      <div class="section">
        <h4>Theme Editor</h4>
        <div class="feature"><button onclick="google.script.run.openThemeEditor()">Open Theme Editor</button></div>
        <div class="feature disabled"><button>Save Theme as Style Pack</button></div>
      </div>
    </div>

    <!-- DIAGNOSTICS -->
    <div class="content" id="diagnostics-content">
      <div class="section">
        <h4>Core</h4>
        <div class="row">
          <div class="feature flex1"><button onclick="google.script.run.util_libSelfTest()">Lib Self-Test</button></div>
          <div class="feature flex1"><button onclick="google.script.run.util_clearLibCache()">Clear Lib Cache</button></div>
        </div>
      </div>
      <div class="section">
        <h4>Currently Developing</h4>
        <div class="feature disabled"><button>Bridge Status / Device List</button></div>
        <div class="feature disabled"><button>Logs & ACKs Viewer</button></div>
      </div>
      <div class="section">
        <h4>Wild Cards</h4>
        <div class="feature disabled"><button>Collaborative Debug View</button></div>
      </div>
    </div>

  </div>
</body>
</html>
